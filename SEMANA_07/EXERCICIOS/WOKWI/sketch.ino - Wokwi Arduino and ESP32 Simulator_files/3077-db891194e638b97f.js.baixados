"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3077],{18377:function(t,e,i){const s=(0,i(61354).Z)();e.Z=s},20414:function(t,e,i){i.d(e,{gn:function(){return s}});function s(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}Object.create;Object.create},26783:function(t,e,i){var s,r,n,a,o,c;function h(t){const e=t.readUint32();let i=t.word64Bit?t.readUint32():0;const s=t.readWord(),r=t.readWord(),n=t.readWord(),a=t.readWord(),o=t.readWord();return t.word64Bit||(i=t.readUint32()),{type:e,flags:i,offset:s,vaddr:r,paddr:n,filesz:a,memsz:o,align:t.readWord()}}function u(t){return{name:"",nameIndex:t.readUint32(),type:t.readUint32(),flags:t.readWord(),addr:t.readWord(),offset:t.readWord(),size:t.readWord(),link:t.readUint32(),info:t.readUint32(),addralign:t.readWord(),entsize:t.readWord()}}function l(t,e){const i=e.getString(t.readUint32());let s=t.word64Bit?0:t.readUint32(),r=t.word64Bit?0:t.readUint32();const n=t.readUint8(),a=t.readUint8(),o=t.readUint16();return t.word64Bit&&(s=t.readUint64(),r=t.readUint64()),{name:i,value:s,size:r,info:n,other:a,shndx:o}}i.d(e,{aX:function(){return p},oB:function(){return a}}),function(t){t[t.NONE=0]="NONE",t[t.REL=1]="REL",t[t.EXEC=2]="EXEC",t[t.DYN=3]="DYN",t[t.CORE=4]="CORE",t[t.LOOS=65024]="LOOS",t[t.HIOS=65279]="HIOS",t[t.LOPROC=65280]="LOPROC",t[t.HIPROC=65535]="HIPROC"}(s||(s={})),function(t){t[t.NONE=0]="NONE",t[t.HPUX=1]="HPUX",t[t.NETBSD=2]="NETBSD",t[t.GNU=3]="GNU",t[t.SOLARIS=6]="SOLARIS",t[t.AIX=7]="AIX",t[t.IRIX=8]="IRIX",t[t.FREEBSD=9]="FREEBSD",t[t.TRU64=10]="TRU64",t[t.MODESTO=11]="MODESTO",t[t.OPENBSD=12]="OPENBSD",t[t.OPENVMS=13]="OPENVMS",t[t.NSK=14]="NSK",t[t.AROS=15]="AROS",t[t.FENIXOS=16]="FENIXOS",t[t.CLOUDABI=17]="CLOUDABI",t[t.OPENVOS=18]="OPENVOS"}(r||(r={})),function(t){t[t.EM_NONE=0]="EM_NONE",t[t.EM_M32=1]="EM_M32",t[t.EM_SPARC=2]="EM_SPARC",t[t.EM_386=3]="EM_386",t[t.EM_68K=4]="EM_68K",t[t.EM_88K=5]="EM_88K",t[t.EM_IAMCU=6]="EM_IAMCU",t[t.EM_860=7]="EM_860",t[t.EM_MIPS=8]="EM_MIPS",t[t.EM_S370=9]="EM_S370",t[t.EM_MIPS_RS3_LE=10]="EM_MIPS_RS3_LE",t[t.EM_PARISC=15]="EM_PARISC",t[t.EM_VPP500=17]="EM_VPP500",t[t.EM_SPARC32PLUS=18]="EM_SPARC32PLUS",t[t.EM_960=19]="EM_960",t[t.EM_PPC=20]="EM_PPC",t[t.EM_PPC64=21]="EM_PPC64",t[t.EM_S390=22]="EM_S390",t[t.EM_SPU=23]="EM_SPU",t[t.EM_V800=36]="EM_V800",t[t.EM_FR20=37]="EM_FR20",t[t.EM_RH32=38]="EM_RH32",t[t.EM_RCE=39]="EM_RCE",t[t.EM_ARM=40]="EM_ARM",t[t.EM_ALPHA=41]="EM_ALPHA",t[t.EM_SH=42]="EM_SH",t[t.EM_SPARCV9=43]="EM_SPARCV9",t[t.EM_TRICORE=44]="EM_TRICORE",t[t.EM_ARC=45]="EM_ARC",t[t.EM_H8_300=46]="EM_H8_300",t[t.EM_H8_300H=47]="EM_H8_300H",t[t.EM_H8S=48]="EM_H8S",t[t.EM_H8_500=49]="EM_H8_500",t[t.EM_IA_64=50]="EM_IA_64",t[t.EM_MIPS_X=51]="EM_MIPS_X",t[t.EM_COLDFIRE=52]="EM_COLDFIRE",t[t.EM_68HC12=53]="EM_68HC12",t[t.EM_MMA=54]="EM_MMA",t[t.EM_PCP=55]="EM_PCP",t[t.EM_NCPU=56]="EM_NCPU",t[t.EM_NDR1=57]="EM_NDR1",t[t.EM_STARCORE=58]="EM_STARCORE",t[t.EM_ME16=59]="EM_ME16",t[t.EM_ST100=60]="EM_ST100",t[t.EM_TINYJ=61]="EM_TINYJ",t[t.EM_X86_64=62]="EM_X86_64",t[t.EM_PDSP=63]="EM_PDSP",t[t.EM_PDP10=64]="EM_PDP10",t[t.EM_PDP11=65]="EM_PDP11",t[t.EM_FX66=66]="EM_FX66",t[t.EM_ST9PLUS=67]="EM_ST9PLUS",t[t.EM_ST7=68]="EM_ST7",t[t.EM_68HC16=69]="EM_68HC16",t[t.EM_68HC11=70]="EM_68HC11",t[t.EM_68HC08=71]="EM_68HC08",t[t.EM_68HC05=72]="EM_68HC05",t[t.EM_SVX=73]="EM_SVX",t[t.EM_ST19=74]="EM_ST19",t[t.EM_VAX=75]="EM_VAX",t[t.EM_CRIS=76]="EM_CRIS",t[t.EM_JAVELIN=77]="EM_JAVELIN",t[t.EM_FIREPATH=78]="EM_FIREPATH",t[t.EM_ZSP=79]="EM_ZSP",t[t.EM_MMIX=80]="EM_MMIX",t[t.EM_HUANY=81]="EM_HUANY",t[t.EM_PRISM=82]="EM_PRISM",t[t.EM_AVR=83]="EM_AVR",t[t.EM_FR30=84]="EM_FR30",t[t.EM_D10V=85]="EM_D10V",t[t.EM_D30V=86]="EM_D30V",t[t.EM_V850=87]="EM_V850",t[t.EM_M32R=88]="EM_M32R",t[t.EM_MN10300=89]="EM_MN10300",t[t.EM_MN10200=90]="EM_MN10200",t[t.EM_PJ=91]="EM_PJ",t[t.EM_OPENRISC=92]="EM_OPENRISC",t[t.EM_ARC_COMPACT=93]="EM_ARC_COMPACT",t[t.EM_XTENSA=94]="EM_XTENSA",t[t.EM_VIDEOCORE=95]="EM_VIDEOCORE",t[t.EM_TMM_GPP=96]="EM_TMM_GPP",t[t.EM_NS32K=97]="EM_NS32K",t[t.EM_TPC=98]="EM_TPC",t[t.EM_SNP1K=99]="EM_SNP1K",t[t.EM_ST200=100]="EM_ST200",t[t.EM_IP2K=101]="EM_IP2K",t[t.EM_MAX=102]="EM_MAX",t[t.EM_CR=103]="EM_CR",t[t.EM_F2MC16=104]="EM_F2MC16",t[t.EM_MSP430=105]="EM_MSP430",t[t.EM_BLACKFIN=106]="EM_BLACKFIN",t[t.EM_SE_C33=107]="EM_SE_C33",t[t.EM_SEP=108]="EM_SEP",t[t.EM_ARCA=109]="EM_ARCA",t[t.EM_UNICORE=110]="EM_UNICORE",t[t.EM_EXCESS=111]="EM_EXCESS",t[t.EM_DXP=112]="EM_DXP",t[t.EM_ALTERA_NIOS2=113]="EM_ALTERA_NIOS2",t[t.EM_CRX=114]="EM_CRX",t[t.EM_XGATE=115]="EM_XGATE",t[t.EM_C166=116]="EM_C166",t[t.EM_M16C=117]="EM_M16C",t[t.EM_DSPIC30F=118]="EM_DSPIC30F",t[t.EM_CE=119]="EM_CE",t[t.EM_M32C=120]="EM_M32C",t[t.EM_TSK3000=131]="EM_TSK3000",t[t.EM_RS08=132]="EM_RS08",t[t.EM_SHARC=133]="EM_SHARC",t[t.EM_ECOG2=134]="EM_ECOG2",t[t.EM_SCORE7=135]="EM_SCORE7",t[t.EM_DSP24=136]="EM_DSP24",t[t.EM_VIDEOCORE3=137]="EM_VIDEOCORE3",t[t.EM_LATTICEMICO32=138]="EM_LATTICEMICO32",t[t.EM_SE_C17=139]="EM_SE_C17",t[t.EM_TI_C6000=140]="EM_TI_C6000",t[t.EM_TI_C2000=141]="EM_TI_C2000",t[t.EM_TI_C5500=142]="EM_TI_C5500",t[t.EM_TI_ARP32=143]="EM_TI_ARP32",t[t.EM_TI_PRU=144]="EM_TI_PRU",t[t.EM_MMDSP_PLUS=160]="EM_MMDSP_PLUS",t[t.EM_CYPRESS_M8C=161]="EM_CYPRESS_M8C",t[t.EM_R32C=162]="EM_R32C",t[t.EM_TRIMEDIA=163]="EM_TRIMEDIA",t[t.EM_QDSP6=164]="EM_QDSP6",t[t.EM_8051=165]="EM_8051",t[t.EM_STXP7X=166]="EM_STXP7X",t[t.EM_NDS32=167]="EM_NDS32",t[t.EM_ECOG1=168]="EM_ECOG1",t[t.EM_ECOG1X=168]="EM_ECOG1X",t[t.EM_MAXQ30=169]="EM_MAXQ30",t[t.EM_XIMO16=170]="EM_XIMO16",t[t.EM_MANIK=171]="EM_MANIK",t[t.EM_CRAYNV2=172]="EM_CRAYNV2",t[t.EM_RX=173]="EM_RX",t[t.EM_METAG=174]="EM_METAG",t[t.EM_MCST_ELBRUS=175]="EM_MCST_ELBRUS",t[t.EM_ECOG16=176]="EM_ECOG16",t[t.EM_CR16=177]="EM_CR16",t[t.EM_ETPU=178]="EM_ETPU",t[t.EM_SLE9X=179]="EM_SLE9X",t[t.EM_L10M=180]="EM_L10M",t[t.EM_K10M=181]="EM_K10M",t[t.EM_AARCH64=183]="EM_AARCH64",t[t.EM_AVR32=185]="EM_AVR32",t[t.EM_STM8=186]="EM_STM8",t[t.EM_TILE64=187]="EM_TILE64",t[t.EM_TILEPRO=188]="EM_TILEPRO",t[t.EM_MICROBLAZE=189]="EM_MICROBLAZE",t[t.EM_CUDA=190]="EM_CUDA",t[t.EM_TILEGX=191]="EM_TILEGX",t[t.EM_CLOUDSHIELD=192]="EM_CLOUDSHIELD",t[t.EM_COREA_1ST=193]="EM_COREA_1ST",t[t.EM_COREA_2ND=194]="EM_COREA_2ND",t[t.EM_ARC_COMPACT2=195]="EM_ARC_COMPACT2",t[t.EM_OPEN8=196]="EM_OPEN8",t[t.EM_RL78=197]="EM_RL78",t[t.EM_VIDEOCORE5=198]="EM_VIDEOCORE5",t[t.EM_78KOR=199]="EM_78KOR",t[t.EM_56800EX=200]="EM_56800EX",t[t.EM_BA1=201]="EM_BA1",t[t.EM_BA2=202]="EM_BA2",t[t.EM_XCORE=203]="EM_XCORE",t[t.EM_MCHP_PIC=204]="EM_MCHP_PIC",t[t.EM_INTEL205=205]="EM_INTEL205",t[t.EM_INTEL206=206]="EM_INTEL206",t[t.EM_INTEL207=207]="EM_INTEL207",t[t.EM_INTEL208=208]="EM_INTEL208",t[t.EM_INTEL209=209]="EM_INTEL209",t[t.EM_KM32=210]="EM_KM32",t[t.EM_KMX32=211]="EM_KMX32",t[t.EM_KMX16=212]="EM_KMX16",t[t.EM_KMX8=213]="EM_KMX8",t[t.EM_KVARC=214]="EM_KVARC",t[t.EM_CDP=215]="EM_CDP",t[t.EM_COGE=216]="EM_COGE",t[t.EM_COOL=217]="EM_COOL",t[t.EM_NORC=218]="EM_NORC",t[t.EM_CSR_KALIMBA=219]="EM_CSR_KALIMBA",t[t.EM_Z80=220]="EM_Z80",t[t.EM_VISIUM=221]="EM_VISIUM",t[t.EM_FT32=222]="EM_FT32",t[t.EM_MOXIE=223]="EM_MOXIE",t[t.EM_AMDGPU=224]="EM_AMDGPU",t[t.EM_RISCV=243]="EM_RISCV"}(n||(n={})),function(t){t[t.NULL=0]="NULL",t[t.LOAD=1]="LOAD",t[t.DYNAMIC=2]="DYNAMIC",t[t.INTERP=3]="INTERP",t[t.NOTE=4]="NOTE",t[t.SHLIB=5]="SHLIB",t[t.PHDR=6]="PHDR",t[t.TLS=7]="TLS"}(a||(a={})),function(t){t[t.NULL=0]="NULL",t[t.PROGBITS=1]="PROGBITS",t[t.SYMTAB=2]="SYMTAB",t[t.STRTAB=3]="STRTAB",t[t.RELA=4]="RELA",t[t.HASH=5]="HASH",t[t.DYNAMIC=6]="DYNAMIC",t[t.NOTE=7]="NOTE",t[t.NOBITS=8]="NOBITS",t[t.REL=9]="REL",t[t.SHLIB=10]="SHLIB",t[t.DYNSYM=11]="DYNSYM",t[t.INIT_ARRAY=14]="INIT_ARRAY",t[t.FINI_ARRAY=15]="FINI_ARRAY",t[t.PREINIT_ARRAY=16]="PREINIT_ARRAY",t[t.GROUP=17]="GROUP",t[t.SYMTAB_SHNDX=18]="SYMTAB_SHNDX"}(o||(o={})),function(t){t[t.WRITE=1]="WRITE",t[t.ALLOC=2]="ALLOC",t[t.EXECINSTR=4]="EXECINSTR",t[t.MERGE=16]="MERGE",t[t.STRINGS=32]="STRINGS",t[t.INFO_LINK=64]="INFO_LINK",t[t.LINK_ORDER=128]="LINK_ORDER",t[t.OS_NONCONFORMING=256]="OS_NONCONFORMING",t[t.GROUP=512]="GROUP",t[t.TLS=1024]="TLS"}(c||(c={}));class d{constructor(t){this.buf=t,this.offset=0,this.wordSize=4,this.decoder=new TextDecoder}readUint8(){return this.buf[this.offset++]}readUint16(){const{offset:t}=this,e=this.buf[t],i=this.buf[t+1];return this.offset+=2,i<<8|e}readUint32(){const{offset:t}=this,e=this.buf[t],i=this.buf[t+1],s=this.buf[t+2],r=this.buf[t+3];return this.offset+=4,(r<<24|s<<16|i<<8|e)>>>0}readUint64(){return this.readUint32()+this.readUint32()*Math.pow(2,32)}readWord(){return 8==this.wordSize?this.readUint64():this.readUint32()}readBytes(t){const e=this.buf.subarray(this.offset,this.offset+t);return this.offset+=t,e}readChars(t){let e=this.readBytes(t);const i=e.indexOf(0);return i>=0&&(e=e.subarray(0,i)),this.decoder.decode(e)}readNullTerminated(){let t=this.buf.indexOf(0,this.offset);t<0&&(t=this.buf.length);const e=this.decoder.decode(this.buf.subarray(this.offset,t));return this.offset=t,e}skip(t){this.offset+=t}seek(t){const e=this.offset;return this.offset=t,e}get currentOffset(){return this.offset}get word64Bit(){return 8===this.wordSize}set word64Bit(t){this.wordSize=t?8:4}}class p{constructor(t){this.sections=[],this.program=[],this.symbols=[];const e=this.reader=new d(t);this.header=function(t){const e={mag:t.readChars(4),class:t.readUint8(),data:t.readUint8(),version:t.readUint8(),osabi:t.readUint8(),abiversion:t.readUint8()};return t.skip(7),t.word64Bit=2===e.class,{ident:e,type:t.readUint16(),machine:t.readUint16(),version:t.readUint32(),entry:t.readWord(),phoff:t.readWord(),shoff:t.readWord(),flags:t.readUint32(),ehsize:t.readUint16(),phentsize:t.readUint16(),phnum:t.readUint16(),shentsize:t.readUint16(),shnum:t.readUint16(),shstrndx:t.readUint16()}}(e);const{shoff:i,shentsize:s,shnum:r,phoff:n,phentsize:a,phnum:c,shstrndx:p}=this.header;for(let o=0;o<r;o++)e.seek(i+o*s),this.sections.push(u(e));const C=this.sections[p].offset;for(const o of this.sections)e.seek(C+o.nameIndex),o.name=e.readNullTerminated();this.stringSection=this.sections.find((t=>".strtab"===t.name&&t.type===o.STRTAB));for(let o=0;o<c;o++)e.seek(n+o*a),this.program.push(h(e));const E=this.sections.find((t=>t.type===o.SYMTAB));if(E){e.seek(E.offset);for(let t=0;t<E.size;t+=E.entsize)this.symbols.push(l(e,this))}}getString(t){const{reader:e,stringSection:i}=this;if(!i)return"";const s=e.seek(i.offset+t),r=e.readNullTerminated();return e.seek(s),r}}},95863:function(t,e,i){i.d(e,{hp:function(){return n},yv:function(){return r},Go:function(){return h},y_:function(){return st},qN:function(){return z},wq:function(){return S},cX:function(){return tt},YR:function(){return Q},OI:function(){return X},cv:function(){return G},ap:function(){return ot},JK:function(){return nt},Z9:function(){return s},rj:function(){return Y},tS:function(){return I},RH:function(){return c},eP:function(){return et},ts:function(){return q},eY:function(){return u},m4:function(){return l},_d:function(){return d},cS:function(){return p},bO:function(){return C},tx:function(){return E},KT:function(){return f},lb:function(){return M},Oo:function(){return g},pW:function(){return R},_R:function(){return _},o9:function(){return $},Jh:function(){return k},OB:function(){return y},Wv:function(){return B},mu:function(){return j},kY:function(){return W},s2:function(){return rt}});class s{constructor(t,e=8192){this.progMem=t,this.sramBytes=e,this.data=new Uint8Array(this.sramBytes+256),this.data16=new Uint16Array(this.data.buffer),this.dataView=new DataView(this.data.buffer),this.progBytes=new Uint8Array(this.progMem.buffer),this.readHooks=[],this.writeHooks=[],this.pendingInterrupts=new Array(128),this.nextClockEvent=null,this.clockEventPool=[],this.pc22Bits=this.progBytes.length>131072,this.gpioPorts=new Set,this.gpioByPort=[],this.onWatchdogReset=()=>{},this.pc=0,this.cycles=0,this.nextInterrupt=-1,this.maxInterrupt=0,this.reset()}reset(){this.SP=this.data.length-1,this.pc=0,this.pendingInterrupts.fill(null),this.nextInterrupt=-1,this.nextClockEvent=null}readData(t){return t>=32&&this.readHooks[t]?this.readHooks[t](t):this.data[t]}writeData(t,e,i=255){const s=this.writeHooks[t];s&&s(e,this.data[t],t,i)||(this.data[t]=e)}get SP(){return this.dataView.getUint16(93,!0)}set SP(t){this.dataView.setUint16(93,t,!0)}get SREG(){return this.data[95]}get interruptsEnabled(){return!!(128&this.SREG)}setInterruptFlag(t){const{flagRegister:e,flagMask:i,enableRegister:s,enableMask:r}=t;t.inverseFlag?this.data[e]&=~i:this.data[e]|=i,this.data[s]&r&&this.queueInterrupt(t)}updateInterruptEnable(t,e){const{enableMask:i,flagRegister:s,flagMask:r,inverseFlag:n}=t;if(e&i){const e=this.data[s]&r;(n?!e:e)&&this.queueInterrupt(t)}else this.clearInterrupt(t,!1)}queueInterrupt(t){const{address:e}=t;this.pendingInterrupts[e]=t,(-1===this.nextInterrupt||this.nextInterrupt>e)&&(this.nextInterrupt=e),e>this.maxInterrupt&&(this.maxInterrupt=e)}clearInterrupt({address:t,flagRegister:e,flagMask:i},s=!0){s&&(this.data[e]&=~i);const{pendingInterrupts:r,maxInterrupt:n}=this;if(r[t]&&(r[t]=null,this.nextInterrupt===t)){this.nextInterrupt=-1;for(let e=t+1;e<=n;e++)if(r[e]){this.nextInterrupt=e;break}}}clearInterruptByFlag(t,e){const{flagRegister:i,flagMask:s}=t;e&s&&(this.data[i]&=~s,this.clearInterrupt(t))}addClockEvent(t,e){const{clockEventPool:i}=this;e=this.cycles+Math.max(1,e);const s=i.pop(),r=null!==s&&void 0!==s?s:{cycles:e,callback:t,next:null};r.cycles=e,r.callback=t;let{nextClockEvent:n}=this,a=null;for(;n&&n.cycles<e;)a=n,n=n.next;return a?(a.next=r,r.next=n):(this.nextClockEvent=r,r.next=n),t}updateClockEvent(t,e){return!!this.clearClockEvent(t)&&(this.addClockEvent(t,e),!0)}clearClockEvent(t){let{nextClockEvent:e}=this;if(!e)return!1;const{clockEventPool:i}=this;let s=null;for(;e;){if(e.callback===t)return s?s.next=e.next:this.nextClockEvent=e.next,i.length<10&&i.push(e),!0;s=e,e=e.next}return!1}tick(){const{cycles:t}=this;let{nextClockEvent:e}=this;for(;e&&e.cycles<=t;)this.cycles=e.cycles,this.nextClockEvent=e.next,e.callback(),this.clockEventPool.length<10&&this.clockEventPool.push(e),e=this.nextClockEvent;this.cycles=t;const{nextInterrupt:i}=this;if(this.interruptsEnabled&&i>=0){const t=this.pendingInterrupts[i];!function(t,e){const i=t.dataView.getUint16(93,!0);t.data[i]=255&t.pc,t.data[i-1]=t.pc>>8&255,t.pc22Bits&&(t.data[i-2]=t.pc>>16&255),t.dataView.setUint16(93,i-(t.pc22Bits?3:2),!0),t.data[95]&=127,t.cycles+=2,t.pc=e}(this,t.address),t.constant||this.clearInterrupt(t)}}}var r,n;!function(t){t[t.AVCC=0]="AVCC",t[t.AREF=1]="AREF",t[t.Internal1V1=2]="Internal1V1",t[t.Internal2V56=3]="Internal2V56",t[t.Reserved=4]="Reserved"}(r||(r={})),function(t){t[t.SingleEnded=0]="SingleEnded",t[t.Differential=1]="Differential",t[t.Constant=2]="Constant",t[t.Temperature=3]="Temperature"}(n||(n={}));const a={0:{type:n.SingleEnded,channel:0},1:{type:n.SingleEnded,channel:1},2:{type:n.SingleEnded,channel:2},3:{type:n.SingleEnded,channel:3},4:{type:n.SingleEnded,channel:4},5:{type:n.SingleEnded,channel:5},6:{type:n.SingleEnded,channel:6},7:{type:n.SingleEnded,channel:7},8:{type:n.Temperature},14:{type:n.Constant,voltage:1.1},15:{type:n.Constant,voltage:0}},o={type:n.Constant,voltage:0},c={ADMUX:124,ADCSRA:122,ADCSRB:123,ADCL:120,ADCH:121,DIDR0:126,adcInterrupt:42,numChannels:8,muxInputMask:15,muxChannels:a,adcReferences:[r.AREF,r.AVCC,r.Reserved,r.Internal1V1]};class h{constructor(t,e){this.cpu=t,this.config=e,this.channelValues=new Array(this.config.numChannels),this.avcc=5,this.aref=5,this.onADCRead=t=>{var e;let i=0;switch(t.type){case n.Constant:i=t.voltage;break;case n.SingleEnded:i=null!==(e=this.channelValues[t.channel])&&void 0!==e?e:0;break;case n.Differential:i=t.gain*((this.channelValues[t.positiveChannel]||0)-(this.channelValues[t.negativeChannel]||0));break;case n.Temperature:i=.378125}const s=i/this.referenceVoltage*1024,r=Math.min(Math.max(Math.floor(s),0),1023);this.cpu.addClockEvent((()=>this.completeADCRead(r)),this.sampleCycles)},this.converting=!1,this.conversionCycles=25,this.ADC={address:this.config.adcInterrupt,flagRegister:this.config.ADCSRA,flagMask:16,enableRegister:this.config.ADCSRA,enableMask:8},t.writeHooks[e.ADCSRA]=(i,s)=>{var r;if(128&i&&!s&&(this.conversionCycles=25),t.data[e.ADCSRA]=i,t.updateInterruptEnable(this.ADC,i),!this.converting&&64&i){if(!(128&i))return this.cpu.addClockEvent((()=>this.completeADCRead(0)),this.sampleCycles),!0;let s=31&this.cpu.data[this.config.ADMUX];8&t.data[e.ADCSRB]&&(s|=32),s&=e.muxInputMask;const n=null!==(r=e.muxChannels[s])&&void 0!==r?r:o;return this.converting=!0,this.onADCRead(n),!0}}}completeADCRead(t){const{ADCL:e,ADCH:i,ADMUX:s,ADCSRA:r}=this.config;this.converting=!1,this.conversionCycles=13,32&this.cpu.data[s]?(this.cpu.data[e]=t<<6&255,this.cpu.data[i]=t>>2):(this.cpu.data[e]=255&t,this.cpu.data[i]=t>>8&3),this.cpu.data[r]&=-65,this.cpu.setInterruptFlag(this.ADC)}get prescaler(){const{ADCSRA:t}=this.config;switch(7&this.cpu.data[t]){case 0:case 1:return 2;case 2:return 4;case 3:return 8;case 4:return 16;case 5:return 32;case 6:return 64;default:return 128}}get referenceVoltageType(){var t;const{ADMUX:e,adcReferences:i}=this.config;let s=this.cpu.data[e]>>6&3;return i.length>4&&8&this.cpu.data[e]&&(s|=4),null!==(t=i[s])&&void 0!==t?t:r.Reserved}get referenceVoltage(){switch(this.referenceVoltageType){case r.AVCC:return this.avcc;case r.AREF:return this.aref;case r.Internal1V1:return 1.1;case r.Internal2V56:return 2.56;default:return this.avcc}}get sampleCycles(){return this.conversionCycles*this.prescaler}}const u={PIN:32,DDR:33,PORT:34,externalInterrupts:[]},l={PIN:35,DDR:36,PORT:37,pinChange:{PCIE:0,PCICR:104,PCIFR:59,PCMSK:107,pinChangeInterrupt:6,mask:255,offset:0},externalInterrupts:[]},d={PIN:38,DDR:39,PORT:40,pinChange:{PCIE:1,PCICR:104,PCIFR:59,PCMSK:108,pinChangeInterrupt:8,mask:255,offset:0},externalInterrupts:[]},p={PIN:41,DDR:42,PORT:43,pinChange:{PCIE:2,PCICR:104,PCIFR:59,PCMSK:109,pinChangeInterrupt:10,mask:255,offset:0},externalInterrupts:[null,null,{EICRA:105,EICRB:0,EIMSK:61,EIFR:60,index:0,interrupt:2},{EICRA:105,EICRB:0,EIMSK:61,EIFR:60,index:1,interrupt:4}]},C={PIN:44,DDR:45,PORT:46,externalInterrupts:[]},E={PIN:47,DDR:48,PORT:49,externalInterrupts:[]},f={PIN:50,DDR:51,PORT:52,externalInterrupts:[]},M={PIN:256,DDR:257,PORT:258,externalInterrupts:[]},g={PIN:259,DDR:260,PORT:261,externalInterrupts:[]},R={PIN:262,DDR:263,PORT:264,externalInterrupts:[]},_={PIN:265,DDR:266,PORT:267,externalInterrupts:[]};var I,T,P;!function(t){t[t.Low=0]="Low",t[t.High=1]="High",t[t.Input=2]="Input",t[t.InputPullUp=3]="InputPullUp"}(I||(I={})),function(t){t[t.None=0]="None",t[t.Enable=1]="Enable",t[t.Set=2]="Set",t[t.Clear=3]="Clear",t[t.Toggle=4]="Toggle"}(T||(T={})),function(t){t[t.LowLevel=0]="LowLevel",t[t.Change=1]="Change",t[t.FallingEdge=2]="FallingEdge",t[t.RisingEdge=3]="RisingEdge"}(P||(P={}));class S{constructor(t,e){var i,s,r,n,a,o,c,h;this.cpu=t,this.portConfig=e,this.externalClockListeners=[],this.listeners=[],this.pinValue=0,this.overrideMask=255,this.overrideValue=0,this.lastValue=0,this.lastDdr=0,this.lastPin=0,this.openCollector=0,t.gpioPorts.add(this),t.gpioByPort[e.PORT]=this,t.writeHooks[e.DDR]=i=>{const s=t.data[e.PORT];return t.data[e.DDR]=i,this.writeGpio(s,i),this.updatePinRegister(i),!0},t.writeHooks[e.PORT]=i=>{const s=t.data[e.DDR];return t.data[e.PORT]=i,this.writeGpio(i,s),this.updatePinRegister(s),!0},t.writeHooks[e.PIN]=(i,s,r,n)=>{const a=t.data[e.PORT],o=t.data[e.DDR],c=a^i&n;return t.data[e.PORT]=c,this.writeGpio(c,o),this.updatePinRegister(o),!0};const{externalInterrupts:u}=e;this.externalInts=u.map((t=>t?{address:t.interrupt,flagRegister:t.EIFR,flagMask:1<<t.index,enableRegister:t.EIMSK,enableMask:1<<t.index}:null));const l=null!==(s=null===(i=u.find((t=>t&&t.EICRA)))||void 0===i?void 0:i.EICRA)&&void 0!==s?s:0;this.attachInterruptHook(l);const d=null!==(n=null===(r=u.find((t=>t&&t.EICRB)))||void 0===r?void 0:r.EICRB)&&void 0!==n?n:0;this.attachInterruptHook(d);const p=null!==(o=null===(a=u.find((t=>t&&t.EIMSK)))||void 0===a?void 0:a.EIMSK)&&void 0!==o?o:0;this.attachInterruptHook(p,"mask");const C=null!==(h=null===(c=u.find((t=>t&&t.EIFR)))||void 0===c?void 0:c.EIFR)&&void 0!==h?h:0;this.attachInterruptHook(C,"flag");const{pinChange:E}=e;if(this.PCINT=E?{address:E.pinChangeInterrupt,flagRegister:E.PCIFR,flagMask:1<<E.PCIE,enableRegister:E.PCICR,enableMask:1<<E.PCIE}:null,E){const{PCIFR:e,PCMSK:i}=E;t.writeHooks[e]=e=>{for(const i of this.cpu.gpioPorts){const{PCINT:s}=i;s&&t.clearInterruptByFlag(s,e)}return!0},t.writeHooks[i]=e=>{t.data[i]=e;for(const i of this.cpu.gpioPorts){const{PCINT:s}=i;s&&t.updateInterruptEnable(s,e)}return!0}}}addListener(t){this.listeners.push(t)}removeListener(t){this.listeners=this.listeners.filter((e=>e!==t))}pinState(t){const e=this.cpu.data[this.portConfig.DDR],i=1<<t,s=this.cpu.data[this.portConfig.PORT]&i?I.InputPullUp:I.Input,r=this.openCollector&i?s:I.High;return e&i?this.lastValue&i?r:I.Low:s}setPin(t,e){const i=1<<t;this.pinValue&=~i,e&&(this.pinValue|=i),this.updatePinRegister(this.cpu.data[this.portConfig.DDR])}timerOverridePin(t,e){const{cpu:i,portConfig:s}=this,r=1<<t;if(e===T.None)this.overrideMask|=r,this.overrideValue&=~r;else switch(this.overrideMask&=~r,e){case T.Enable:this.overrideValue&=~r,this.overrideValue|=i.data[s.PORT]&r;break;case T.Set:this.overrideValue|=r;break;case T.Clear:this.overrideValue&=~r;break;case T.Toggle:this.overrideValue^=r}const n=i.data[s.DDR];this.writeGpio(i.data[s.PORT],n),this.updatePinRegister(n)}updatePinRegister(t){var e,i;const s=this.pinValue&~t|this.lastValue&t;if(this.cpu.data[this.portConfig.PIN]=s,this.lastPin!==s){for(let t=0;t<8;t++)if((s&1<<t)!==(this.lastPin&1<<t)){const r=!!(s&1<<t);this.toggleInterrupt(t,r),null===(i=(e=this.externalClockListeners)[t])||void 0===i||i.call(e,r)}this.lastPin=s}}toggleInterrupt(t,e){const{cpu:i,portConfig:s,externalInts:r,PCINT:n}=this,{externalInterrupts:a,pinChange:o}=s,c=a[t],h=r[t];if(h&&c){const{index:t,EICRA:s,EICRB:r,EIMSK:n}=c;if(i.data[n]&1<<t){const n=t>=4?r:s,a=t%4*2,o=i.data[n]>>a&3;let c=!1;switch(h.constant=!1,o){case P.LowLevel:c=!e,h.constant=!0;break;case P.Change:c=!0;break;case P.FallingEdge:c=!e;break;case P.RisingEdge:c=e}c?i.setInterruptFlag(h):h.constant&&i.clearInterrupt(h,!0)}}if(o&&n&&o.mask&1<<t){const{PCMSK:e}=o;i.data[e]&1<<t+o.offset&&i.setInterruptFlag(n)}}attachInterruptHook(t,e="other"){if(!t)return;const{cpu:i}=this;i.writeHooks[t]=s=>{"flag"!==e&&(i.data[t]=s);for(const t of i.gpioPorts){for(const r of t.externalInts)r&&"mask"===e&&i.updateInterruptEnable(r,s),r&&!r.constant&&"flag"===e&&i.clearInterruptByFlag(r,s);t.checkExternalInterrupts()}return!0}}checkExternalInterrupts(){const{cpu:t}=this,{externalInterrupts:e}=this.portConfig;for(let i=0;i<8;i++){const s=e[i];if(!s)continue;const r=!!(this.lastPin&1<<i),{index:n,EICRA:a,EICRB:o,EIMSK:c,EIFR:h,interrupt:u}=s;if(!(t.data[c]&1<<n)||r)continue;const l=n>=4?o:a,d=n%4*2;(t.data[l]>>d&3)===P.LowLevel&&t.queueInterrupt({address:u,flagRegister:h,flagMask:1<<n,enableRegister:c,enableMask:1<<n,constant:!0})}}writeGpio(t,e){const i=(t&this.overrideMask|this.overrideValue)&e|t&~e,s=this.lastValue;if(i!==s||e!==this.lastDdr){this.lastValue=i,this.lastDdr=e;for(const t of this.listeners)t(i,s)}}}const m={0:0,1:1,2:8,3:64,4:256,5:1024,6:0,7:0};var A;!function(t){t[t.FallingEdge=6]="FallingEdge",t[t.RisingEdge=7]="RisingEdge"}(A||(A={}));const O={TOV:1,OCFA:2,OCFB:4,OCFC:0,TOIE:1,OCIEA:2,OCIEB:4,OCIEC:0},k=Object.assign({bits:8,captureInterrupt:0,compAInterrupt:28,compBInterrupt:30,compCInterrupt:0,ovfInterrupt:32,TIFR:53,OCRA:71,OCRB:72,OCRC:0,ICR:0,TCNT:70,TCCRA:68,TCCRB:69,TCCRC:0,TIMSK:110,dividers:m,compPortA:p.PORT,compPinA:6,compPortB:p.PORT,compPinB:5,compPortC:0,compPinC:0,externalClockPort:p.PORT,externalClockPin:4},O),y=Object.assign({bits:16,captureInterrupt:20,compAInterrupt:22,compBInterrupt:24,compCInterrupt:0,ovfInterrupt:26,TIFR:54,OCRA:136,OCRB:138,OCRC:0,ICR:134,TCNT:132,TCCRA:128,TCCRB:129,TCCRC:130,TIMSK:111,dividers:m,compPortA:l.PORT,compPinA:1,compPortB:l.PORT,compPinB:2,compPortC:0,compPinC:0,externalClockPort:p.PORT,externalClockPin:5},O),B=Object.assign({bits:8,captureInterrupt:0,compAInterrupt:14,compBInterrupt:16,compCInterrupt:0,ovfInterrupt:18,TIFR:55,OCRA:179,OCRB:180,OCRC:0,ICR:0,TCNT:178,TCCRA:176,TCCRB:177,TCCRC:0,TIMSK:112,dividers:{0:0,1:1,2:8,3:32,4:64,5:128,6:256,7:1024},compPortA:l.PORT,compPinA:3,compPortB:p.PORT,compPinB:3,compPortC:0,compPinC:0,externalClockPort:0,externalClockPin:0},O);var b,v,D;!function(t){t[t.Normal=0]="Normal",t[t.PWMPhaseCorrect=1]="PWMPhaseCorrect",t[t.CTC=2]="CTC",t[t.FastPWM=3]="FastPWM",t[t.PWMPhaseFrequencyCorrect=4]="PWMPhaseFrequencyCorrect",t[t.Reserved=5]="Reserved"}(b||(b={})),function(t){t[t.Max=0]="Max",t[t.Top=1]="Top",t[t.Bottom=2]="Bottom"}(v||(v={})),function(t){t[t.Immediate=0]="Immediate",t[t.Top=1]="Top",t[t.Bottom=2]="Bottom"}(D||(D={}));const{Normal:U,PWMPhaseCorrect:N,CTC:w,FastPWM:x,Reserved:F,PWMPhaseFrequencyCorrect:L}=b,H=[[U,255,D.Immediate,v.Max,0],[N,255,D.Top,v.Bottom,0],[w,1,D.Immediate,v.Max,0],[x,255,D.Bottom,v.Max,0],[F,255,D.Immediate,v.Max,0],[N,1,D.Top,v.Bottom,1],[F,255,D.Immediate,v.Max,0],[x,1,D.Bottom,v.Top,1]],V=[[U,65535,D.Immediate,v.Max,0],[N,255,D.Top,v.Bottom,0],[N,511,D.Top,v.Bottom,0],[N,1023,D.Top,v.Bottom,0],[w,1,D.Immediate,v.Max,0],[x,255,D.Bottom,v.Top,0],[x,511,D.Bottom,v.Top,0],[x,1023,D.Bottom,v.Top,0],[L,2,D.Bottom,v.Bottom,0],[L,1,D.Bottom,v.Bottom,1],[N,2,D.Top,v.Bottom,0],[N,1,D.Top,v.Bottom,1],[w,2,D.Immediate,v.Max,0],[F,65535,D.Immediate,v.Max,0],[x,2,D.Bottom,v.Top,1],[x,1,D.Bottom,v.Top,1]];class X{constructor(t,e){if(this.cpu=t,this.config=e,this.MAX=16===this.config.bits?65535:255,this.lastCycle=0,this.ocrA=0,this.nextOcrA=0,this.ocrB=0,this.nextOcrB=0,this.hasOCRC=this.config.OCRC>0,this.ocrC=0,this.nextOcrC=0,this.ocrUpdateMode=D.Immediate,this.tovUpdateMode=v.Max,this.icr=0,this.tcnt=0,this.tcntNext=0,this.tcntUpdated=!1,this.updateDivider=!1,this.countingUp=!0,this.divider=0,this.externalClockRisingEdge=!1,this.highByteTemp=0,this.OVF={address:this.config.ovfInterrupt,flagRegister:this.config.TIFR,flagMask:this.config.TOV,enableRegister:this.config.TIMSK,enableMask:this.config.TOIE},this.OCFA={address:this.config.compAInterrupt,flagRegister:this.config.TIFR,flagMask:this.config.OCFA,enableRegister:this.config.TIMSK,enableMask:this.config.OCIEA},this.OCFB={address:this.config.compBInterrupt,flagRegister:this.config.TIFR,flagMask:this.config.OCFB,enableRegister:this.config.TIMSK,enableMask:this.config.OCIEB},this.OCFC={address:this.config.compCInterrupt,flagRegister:this.config.TIFR,flagMask:this.config.OCFC,enableRegister:this.config.TIMSK,enableMask:this.config.OCIEC},this.count=(t=!0,e=!1)=>{const{divider:i,lastCycle:s,cpu:r}=this,{cycles:n}=r,a=n-s;if(i&&a>=i||e){const t=e?1:Math.floor(a/i);this.lastCycle+=t*i;const s=this.tcnt,{timerMode:n,TOP:o}=this,c=n===N||n===L,h=c?this.phasePwmCount(s,t):(s+t)%(o+1),u=s+t>o;if(this.tcntUpdated||(this.tcnt=h,c||this.timerUpdated(h,s)),!c){if(n===x&&u){const{compA:t,compB:e}=this;t&&this.updateCompPin(t,"A",!0),e&&this.updateCompPin(e,"B",!0)}this.ocrUpdateMode==D.Bottom&&u&&(this.ocrA=this.nextOcrA,this.ocrB=this.nextOcrB,this.ocrC=this.nextOcrC),!u||this.tovUpdateMode!=v.Top&&o!==this.MAX||r.setInterruptFlag(this.OVF)}}if(this.tcntUpdated&&(this.tcnt=this.tcntNext,this.tcntUpdated=!1,(0===this.tcnt&&this.ocrUpdateMode===D.Bottom||this.tcnt===this.TOP&&this.ocrUpdateMode===D.Top)&&(this.ocrA=this.nextOcrA,this.ocrB=this.nextOcrB,this.ocrC=this.nextOcrC)),this.updateDivider){const{CS:t}=this,{externalClockPin:e}=this.config,i=this.config.dividers[t];return this.lastCycle=i?this.cpu.cycles:0,this.updateDivider=!1,this.divider=i,this.config.externalClockPort&&!this.externalClockPort&&(this.externalClockPort=this.cpu.gpioByPort[this.config.externalClockPort]),this.externalClockPort&&(this.externalClockPort.externalClockListeners[e]=null),void(i?r.addClockEvent(this.count,this.lastCycle+i-r.cycles):!this.externalClockPort||t!==A.FallingEdge&&t!==A.RisingEdge||(this.externalClockPort.externalClockListeners[e]=this.externalClockCallback,this.externalClockRisingEdge=t===A.RisingEdge))}t&&i&&r.addClockEvent(this.count,this.lastCycle+i-r.cycles)},this.externalClockCallback=t=>{t===this.externalClockRisingEdge&&this.count(!1,!0)},this.updateWGMConfig(),this.cpu.readHooks[e.TCNT]=t=>(this.count(!1),16===this.config.bits&&(this.cpu.data[t+1]=this.tcnt>>8),this.cpu.data[t]=255&this.tcnt),this.cpu.writeHooks[e.TCNT]=t=>{this.tcntNext=this.highByteTemp<<8|t,this.countingUp=!0,this.tcntUpdated=!0,this.cpu.updateClockEvent(this.count,0),this.divider&&this.timerUpdated(this.tcntNext,this.tcntNext)},this.cpu.writeHooks[e.OCRA]=t=>{this.nextOcrA=this.highByteTemp<<8|t,this.ocrUpdateMode===D.Immediate&&(this.ocrA=this.nextOcrA)},this.cpu.writeHooks[e.OCRB]=t=>{this.nextOcrB=this.highByteTemp<<8|t,this.ocrUpdateMode===D.Immediate&&(this.ocrB=this.nextOcrB)},this.hasOCRC&&(this.cpu.writeHooks[e.OCRC]=t=>{this.nextOcrC=this.highByteTemp<<8|t,this.ocrUpdateMode===D.Immediate&&(this.ocrC=this.nextOcrC)}),16===this.config.bits){this.cpu.writeHooks[e.ICR]=t=>{this.icr=this.highByteTemp<<8|t};const i=t=>{this.highByteTemp=t},s=(e,i,s)=>(this.highByteTemp=e&this.ocrMask>>8,t.data[s]=this.highByteTemp,!0);this.cpu.writeHooks[e.TCNT+1]=i,this.cpu.writeHooks[e.OCRA+1]=s,this.cpu.writeHooks[e.OCRB+1]=s,this.hasOCRC&&(this.cpu.writeHooks[e.OCRC+1]=s),this.cpu.writeHooks[e.ICR+1]=i}t.writeHooks[e.TCCRA]=t=>(this.cpu.data[e.TCCRA]=t,this.updateWGMConfig(),!0),t.writeHooks[e.TCCRB]=t=>(e.TCCRC||(this.checkForceCompare(t),t&=-193),this.cpu.data[e.TCCRB]=t,this.updateDivider=!0,this.cpu.clearClockEvent(this.count),this.cpu.addClockEvent(this.count,0),this.updateWGMConfig(),!0),e.TCCRC&&(t.writeHooks[e.TCCRC]=t=>{this.checkForceCompare(t)}),t.writeHooks[e.TIFR]=t=>(this.cpu.data[e.TIFR]=t,this.cpu.clearInterruptByFlag(this.OVF,t),this.cpu.clearInterruptByFlag(this.OCFA,t),this.cpu.clearInterruptByFlag(this.OCFB,t),!0),t.writeHooks[e.TIMSK]=t=>{this.cpu.updateInterruptEnable(this.OVF,t),this.cpu.updateInterruptEnable(this.OCFA,t),this.cpu.updateInterruptEnable(this.OCFB,t)}}reset(){this.divider=0,this.lastCycle=0,this.ocrA=0,this.nextOcrA=0,this.ocrB=0,this.nextOcrB=0,this.ocrC=0,this.nextOcrC=0,this.icr=0,this.tcnt=0,this.tcntNext=0,this.tcntUpdated=!1,this.countingUp=!1,this.updateDivider=!0}get TCCRA(){return this.cpu.data[this.config.TCCRA]}get TCCRB(){return this.cpu.data[this.config.TCCRB]}get TIMSK(){return this.cpu.data[this.config.TIMSK]}get CS(){return 7&this.TCCRB}get WGM(){const t=16===this.config.bits?24:8;return(this.TCCRB&t)>>1|3&this.TCCRA}get TOP(){switch(this.topValue){case 1:return this.ocrA;case 2:return this.icr;default:return this.topValue}}get ocrMask(){switch(this.topValue){case 1:case 2:return 65535;default:return this.topValue}}get debugTCNT(){return this.tcnt}updateWGMConfig(){const{config:t,WGM:e}=this,i=16===t.bits?V:H,s=this.cpu.data[t.TCCRA],[r,n,a,o,c]=i[e];this.timerMode=r,this.topValue=n,this.ocrUpdateMode=a,this.tovUpdateMode=o;const h=r===x||r===N||r===L,u=this.compA;this.compA=s>>6&3,1!==this.compA||!h||1&c||(this.compA=0),!!u!==!!this.compA&&this.updateCompA(this.compA?T.Enable:T.None);const l=this.compB;if(this.compB=s>>4&3,1===this.compB&&h&&(this.compB=0),!!l!==!!this.compB&&this.updateCompB(this.compB?T.Enable:T.None),this.hasOCRC){const t=this.compC;this.compC=s>>2&3,1===this.compC&&h&&(this.compC=0),!!t!==!!this.compC&&this.updateCompC(this.compC?T.Enable:T.None)}}phasePwmCount(t,e){const{ocrA:i,ocrB:s,ocrC:r,hasOCRC:n,TOP:a,MAX:o,tcntUpdated:c}=this;for(t||a||(e=0,this.ocrUpdateMode===D.Top&&(this.ocrA=this.nextOcrA,this.ocrB=this.nextOcrB,this.ocrC=this.nextOcrC));e>0;)this.countingUp?++t!==a||c||(this.countingUp=!1,this.ocrUpdateMode===D.Top&&(this.ocrA=this.nextOcrA,this.ocrB=this.nextOcrB,this.ocrC=this.nextOcrC)):--t||c||(this.countingUp=!0,this.cpu.setInterruptFlag(this.OVF),this.ocrUpdateMode===D.Bottom&&(this.ocrA=this.nextOcrA,this.ocrB=this.nextOcrB,this.ocrC=this.nextOcrC)),c||(t===i&&(this.cpu.setInterruptFlag(this.OCFA),this.compA&&this.updateCompPin(this.compA,"A")),t===s&&(this.cpu.setInterruptFlag(this.OCFB),this.compB&&this.updateCompPin(this.compB,"B")),n&&t===r&&(this.cpu.setInterruptFlag(this.OCFC),this.compC&&this.updateCompPin(this.compC,"C"))),e--;return t&o}timerUpdated(t,e){const{ocrA:i,ocrB:s,ocrC:r,hasOCRC:n}=this,a=e>t;((e<i||a)&&t>=i||e<i&&a)&&(this.cpu.setInterruptFlag(this.OCFA),this.compA&&this.updateCompPin(this.compA,"A")),((e<s||a)&&t>=s||e<s&&a)&&(this.cpu.setInterruptFlag(this.OCFB),this.compB&&this.updateCompPin(this.compB,"B")),n&&((e<r||a)&&t>=r||e<r&&a)&&(this.cpu.setInterruptFlag(this.OCFC),this.compC&&this.updateCompPin(this.compC,"C"))}checkForceCompare(t){this.timerMode!=b.FastPWM&&this.timerMode!=b.PWMPhaseCorrect&&this.timerMode!=b.PWMPhaseFrequencyCorrect&&(128&t&&this.updateCompPin(this.compA,"A"),64&t&&this.updateCompPin(this.compB,"B"),this.config.compPortC&&32&t&&this.updateCompPin(this.compC,"C"))}updateCompPin(t,e,i=!1){let s=T.None;const r=3===t,n=this.countingUp===r;switch(this.timerMode){case U:case w:s=function(t){switch(t){case 1:return T.Toggle;case 2:return T.Clear;case 3:return T.Set;default:return T.Enable}}(t);break;case x:s=1===t?i?T.None:T.Toggle:r!==i?T.Set:T.Clear;break;case N:case L:s=1===t?T.Toggle:n?T.Set:T.Clear}s!==T.None&&("A"===e?this.updateCompA(s):"B"===e?this.updateCompB(s):this.updateCompC(s))}updateCompA(t){const{compPortA:e,compPinA:i}=this.config,s=this.cpu.gpioByPort[e];null===s||void 0===s||s.timerOverridePin(i,t)}updateCompB(t){const{compPortB:e,compPinB:i}=this.config,s=this.cpu.gpioByPort[e];null===s||void 0===s||s.timerOverridePin(i,t)}updateCompC(t){const{compPortC:e,compPinC:i}=this.config,s=this.cpu.gpioByPort[e];null===s||void 0===s||s.timerOverridePin(i,t)}}const W={rxCompleteInterrupt:36,dataRegisterEmptyInterrupt:38,txCompleteInterrupt:40,UCSRA:192,UCSRB:193,UCSRC:194,UBRRL:196,UBRRH:197,UDR:198},K={5:31,6:63,7:127,8:255,9:255};class G{constructor(t,e,i){this.cpu=t,this.config=e,this.freqHz=i,this.onByteTransmit=null,this.onLineTransmit=null,this.onRxComplete=null,this.onConfigurationChange=null,this.rxBusyValue=!1,this.rxByte=0,this.lineBuffer="",this.RXC={address:this.config.rxCompleteInterrupt,flagRegister:this.config.UCSRA,flagMask:128,enableRegister:this.config.UCSRB,enableMask:128,constant:!0},this.UDRE={address:this.config.dataRegisterEmptyInterrupt,flagRegister:this.config.UCSRA,flagMask:32,enableRegister:this.config.UCSRB,enableMask:32},this.TXC={address:this.config.txCompleteInterrupt,flagRegister:this.config.UCSRA,flagMask:64,enableRegister:this.config.UCSRB,enableMask:64},this.reset(),this.cpu.writeHooks[e.UCSRA]=(i,s)=>{var r;return t.data[e.UCSRA]=3&i,t.clearInterruptByFlag(this.TXC,i),(2&i)!==(2&s)&&(null===(r=this.onConfigurationChange)||void 0===r||r.call(this)),!0},this.cpu.writeHooks[e.UCSRB]=(i,s)=>{var r;return t.updateInterruptEnable(this.RXC,i),t.updateInterruptEnable(this.UDRE,i),t.updateInterruptEnable(this.TXC,i),16&i&&16&s&&t.clearInterrupt(this.RXC),8&i&&!(8&s)&&t.setInterruptFlag(this.UDRE),t.data[e.UCSRB]=i,(28&i)!==(28&s)&&(null===(r=this.onConfigurationChange)||void 0===r||r.call(this)),!0},this.cpu.writeHooks[e.UCSRC]=i=>{var s;return t.data[e.UCSRC]=i,null===(s=this.onConfigurationChange)||void 0===s||s.call(this),!0},this.cpu.readHooks[e.UDR]=()=>{var t;const e=null!==(t=K[this.bitsPerChar])&&void 0!==t?t:255,i=this.rxByte&e;return this.rxByte=0,this.cpu.clearInterrupt(this.RXC),i},this.cpu.writeHooks[e.UDR]=e=>{if(this.onByteTransmit&&this.onByteTransmit(e),this.onLineTransmit){const t=String.fromCharCode(e);"\n"===t?(this.onLineTransmit(this.lineBuffer),this.lineBuffer=""):this.lineBuffer+=t}this.cpu.addClockEvent((()=>{t.setInterruptFlag(this.UDRE),t.setInterruptFlag(this.TXC)}),this.cyclesPerChar),this.cpu.clearInterrupt(this.TXC),this.cpu.clearInterrupt(this.UDRE)},this.cpu.writeHooks[e.UBRRH]=t=>{var i;return this.cpu.data[e.UBRRH]=t,null===(i=this.onConfigurationChange)||void 0===i||i.call(this),!0},this.cpu.writeHooks[e.UBRRL]=t=>{var i;return this.cpu.data[e.UBRRL]=t,null===(i=this.onConfigurationChange)||void 0===i||i.call(this),!0}}reset(){this.cpu.data[this.config.UCSRA]=32,this.cpu.data[this.config.UCSRB]=0,this.cpu.data[this.config.UCSRC]=6,this.rxBusyValue=!1,this.rxByte=0,this.lineBuffer=""}get rxBusy(){return this.rxBusyValue}writeByte(t,e=!1){var i;const{cpu:s}=this;return!(this.rxBusyValue||!this.rxEnable)&&(e?(this.rxByte=t,s.setInterruptFlag(this.RXC),void(null===(i=this.onRxComplete)||void 0===i||i.call(this))):(this.rxBusyValue=!0,s.addClockEvent((()=>{this.rxBusyValue=!1,this.writeByte(t,!0)}),this.cyclesPerChar),!0))}get cyclesPerChar(){const t=1+this.bitsPerChar+this.stopBits+(this.parityEnabled?1:0);return(this.UBRR+1)*this.multiplier*t}get UBRR(){const{UBRRH:t,UBRRL:e}=this.config;return this.cpu.data[t]<<8|this.cpu.data[e]}get multiplier(){return 2&this.cpu.data[this.config.UCSRA]?8:16}get rxEnable(){return!!(16&this.cpu.data[this.config.UCSRB])}get txEnable(){return!!(8&this.cpu.data[this.config.UCSRB])}get baudRate(){return Math.floor(this.freqHz/(this.multiplier*(1+this.UBRR)))}get bitsPerChar(){switch((6&this.cpu.data[this.config.UCSRC])>>1|4&this.cpu.data[this.config.UCSRB]){case 0:return 5;case 1:return 6;case 2:return 7;case 3:return 8;default:return 9}}get stopBits(){return 8&this.cpu.data[this.config.UCSRC]?2:1}get parityEnabled(){return!!(32&this.cpu.data[this.config.UCSRC])}get parityOdd(){return!!(16&this.cpu.data[this.config.UCSRC])}}class Y{constructor(t){this.memory=new Uint8Array(t),this.memory.fill(255)}readMemory(t){return this.memory[t]}writeMemory(t,e){this.memory[t]&=e}eraseMemory(t){this.memory[t]=255}}const q={eepromReadyInterrupt:44,EECR:63,EEDR:64,EEARL:65,EEARH:66,eraseCycles:28800,writeCycles:28800};class z{constructor(t,e,i=q){this.cpu=t,this.backend=e,this.config=i,this.writeEnabledCycles=0,this.writeCompleteCycles=0,this.EER={address:this.config.eepromReadyInterrupt,flagRegister:this.config.EECR,flagMask:2,enableRegister:this.config.EECR,enableMask:8,constant:!0,inverseFlag:!0},this.cpu.writeHooks[this.config.EECR]=t=>{const{EEARH:e,EEARL:i,EECR:s,EEDR:r}=this.config,n=this.cpu.data[e]<<8|this.cpu.data[i];if(this.cpu.data[s]=-63&this.cpu.data[s]|62&t,this.cpu.updateInterruptEnable(this.EER,t),1&t&&this.cpu.clearInterrupt(this.EER),4&t){const t=4;this.writeEnabledCycles=this.cpu.cycles+t,this.cpu.addClockEvent((()=>{this.cpu.data[s]&=-5}),t)}if(1&t)return this.cpu.data[r]=this.backend.readMemory(n),this.cpu.cycles+=4,!0;if(2&t){if(this.cpu.cycles>=this.writeEnabledCycles)return this.cpu.data[s]&=-3,!0;if(this.cpu.cycles<this.writeCompleteCycles)return!0;const e=this.cpu.data[r];this.writeCompleteCycles=this.cpu.cycles,32&t||(this.backend.eraseMemory(n),this.writeCompleteCycles+=this.config.eraseCycles),16&t||(this.backend.writeMemory(n,e),this.writeCompleteCycles+=this.config.writeCycles),this.cpu.data[s]|=2,this.cpu.addClockEvent((()=>{this.cpu.setInterruptFlag(this.EER)}),this.writeCompleteCycles-this.cpu.cycles),this.cpu.cycles+=2}return!0}}}const Z=248,j={twiInterrupt:48,TWBR:184,TWSR:185,TWAR:186,TWDR:187,TWCR:188,TWAMR:189};class J{constructor(t){this.twi=t}start(){this.twi.completeStart()}stop(){this.twi.completeStop()}connectToSlave(){this.twi.completeConnect(!1)}writeByte(){this.twi.completeWrite(!1)}readByte(){this.twi.completeRead(255)}}class Q{constructor(t,e,i){this.cpu=t,this.config=e,this.freqHz=i,this.eventHandler=new J(this),this.busy=!1,this.TWI={address:this.config.twiInterrupt,flagRegister:this.config.TWCR,flagMask:128,enableRegister:this.config.TWCR,enableMask:1},this.updateStatus(Z),this.cpu.writeHooks[e.TWCR]=t=>{this.cpu.data[e.TWCR]=t;const i=128&t;this.cpu.clearInterruptByFlag(this.TWI,t),this.cpu.updateInterruptEnable(this.TWI,t);const{status:s}=this;if(i&&4&t&&!this.busy){const e=this.cpu.data[this.config.TWDR];return this.cpu.addClockEvent((()=>{if(32&t)this.busy=!0,this.eventHandler.start(s!==Z);else if(16&t)this.busy=!0,this.eventHandler.stop();else if(8===s||16===s)this.busy=!0,this.eventHandler.connectToSlave(e>>1,!(1&e));else if(24===s||40===s)this.busy=!0,this.eventHandler.writeByte(e);else if(64===s||80===s){this.busy=!0;const e=!!(64&t);this.eventHandler.readByte(e)}}),0),!0}}}get prescaler(){switch(3&this.cpu.data[this.config.TWSR]){case 0:return 1;case 1:return 4;case 2:return 16;case 3:return 64}throw new Error("Invalid prescaler value!")}get sclFrequency(){return this.freqHz/(16+2*this.cpu.data[this.config.TWBR]*this.prescaler)}completeStart(){this.busy=!1,this.updateStatus(this.status===Z?8:16)}completeStop(){this.busy=!1,this.cpu.data[this.config.TWCR]&=-17,this.updateStatus(Z)}completeConnect(t){this.busy=!1,1&this.cpu.data[this.config.TWDR]?this.updateStatus(t?64:72):this.updateStatus(t?24:32)}completeWrite(t){this.busy=!1,this.updateStatus(t?40:48)}completeRead(t){this.busy=!1;const e=!!(64&this.cpu.data[this.config.TWCR]);this.cpu.data[this.config.TWDR]=t,this.updateStatus(e?80:88)}get status(){return 248&this.cpu.data[this.config.TWSR]}updateStatus(t){const{TWSR:e}=this.config;this.cpu.data[e]=-249&this.cpu.data[e]|t,this.cpu.setInterruptFlag(this.TWI)}}const $={spiInterrupt:34,SPCR:76,SPSR:77,SPDR:78};class tt{constructor(t,e,i){this.cpu=t,this.config=e,this.freqHz=i,this.onTransfer=()=>0,this.onByte=t=>{const e=this.onTransfer(t);this.cpu.addClockEvent((()=>this.completeTransfer(e)),this.transferCycles)},this.transmissionActive=!1,this.SPI={address:this.config.spiInterrupt,flagRegister:this.config.SPSR,flagMask:128,enableRegister:this.config.SPCR,enableMask:128};const{SPCR:s,SPSR:r,SPDR:n}=e;t.writeHooks[n]=e=>{if(64&t.data[s])return this.transmissionActive?(t.data[r]|=64,!0):(t.data[r]&=-65,this.cpu.clearInterrupt(this.SPI),this.transmissionActive=!0,this.onByte(e),!0)},t.writeHooks[s]=t=>{this.cpu.updateInterruptEnable(this.SPI,t)},t.writeHooks[r]=t=>{this.cpu.data[r]=t,this.cpu.clearInterruptByFlag(this.SPI,t)}}reset(){this.transmissionActive=!1}completeTransfer(t){const{SPDR:e}=this.config;this.cpu.data[e]=t,this.cpu.setInterruptFlag(this.SPI),this.transmissionActive=!1}get isMaster(){return!!(16&this.cpu.data[this.config.SPCR])}get dataOrder(){return 32&this.cpu.data[this.config.SPCR]?"lsbFirst":"msbFirst"}get spiMode(){return(4&this.cpu.data[this.config.SPCR]?2:0)|(8&this.cpu.data[this.config.SPCR]?1:0)}get clockDivider(){const t=1&this.cpu.data[this.config.SPSR]?2:4;switch(3&this.cpu.data[this.config.SPCR]){case 0:return t;case 1:return 4*t;case 2:return 16*t;case 3:return 32*t}throw new Error("Invalid divider value!")}get transferCycles(){return 8*this.clockDivider}get spiFrequency(){return this.freqHz/this.clockDivider}}const et={CLKPR:97},it=[1,2,4,8,16,32,64,128,256,2,4,8,16,32,64,128];class st{constructor(t,e,i=et){this.cpu=t,this.baseFreqHz=e,this.config=i,this.clockEnabledCycles=0,this.prescalerValue=1,this.cyclesDelta=0,this.cpu.writeHooks[this.config.CLKPR]=e=>{if((!this.clockEnabledCycles||this.clockEnabledCycles<t.cycles)&&128===e)this.clockEnabledCycles=this.cpu.cycles+4;else if(this.clockEnabledCycles&&this.clockEnabledCycles>=t.cycles){this.clockEnabledCycles=0;const i=15&e,s=this.prescalerValue;this.prescalerValue=it[i],this.cpu.data[this.config.CLKPR]=i,s!==this.prescalerValue&&(this.cyclesDelta=(t.cycles+this.cyclesDelta)*(s/this.prescalerValue)-t.cycles)}return!0}}get frequency(){return this.baseFreqHz/this.prescalerValue}get prescaler(){return this.prescalerValue}get timeNanos(){return(this.cpu.cycles+this.cyclesDelta)/this.frequency*1e9}get timeMicros(){return(this.cpu.cycles+this.cyclesDelta)/this.frequency*1e6}get timeMillis(){return(this.cpu.cycles+this.cyclesDelta)/this.frequency*1e3}}const rt={watchdogInterrupt:12,MCUSR:84,WDTCSR:96};class nt{constructor(t,e,i){this.cpu=t,this.config=e,this.clock=i,this.clockFrequency=128e3,this.changeEnabledCycles=0,this.watchdogTimeout=0,this.enabledValue=!1,this.scheduled=!1,this.Watchdog={address:this.config.watchdogInterrupt,flagRegister:this.config.WDTCSR,flagMask:128,enableRegister:this.config.WDTCSR,enableMask:64},this.checkWatchdog=()=>{if(this.enabled&&this.cpu.cycles>=this.watchdogTimeout){const t=this.cpu.data[this.config.WDTCSR];if(64&t&&this.cpu.setInterruptFlag(this.Watchdog),8&t){if(!(64&t))return this.cpu.reset(),this.scheduled=!1,void(this.cpu.data[this.config.MCUSR]|=8);this.cpu.data[this.config.WDTCSR]&=-65}this.resetWatchdog()}this.enabled?(this.scheduled=!0,this.cpu.addClockEvent(this.checkWatchdog,this.watchdogTimeout-this.cpu.cycles)):this.scheduled=!1};const{WDTCSR:s}=e;this.cpu.onWatchdogReset=()=>{this.resetWatchdog()},t.writeHooks[s]=(t,e)=>(16&t&&8&t?(this.changeEnabledCycles=this.cpu.cycles+4,t&=-48):(this.cpu.cycles>=this.changeEnabledCycles&&(t=-48&t|47&e),this.enabledValue=!!(8&t||64&t),this.cpu.data[s]=t),this.enabled&&this.resetWatchdog(),this.enabled&&!this.scheduled&&this.cpu.addClockEvent(this.checkWatchdog,this.watchdogTimeout-this.cpu.cycles),this.cpu.clearInterruptByFlag(this.Watchdog,t),!0)}resetWatchdog(){const t=Math.floor(this.clock.frequency/this.clockFrequency*this.prescaler);this.watchdogTimeout=this.cpu.cycles+t}get enabled(){return this.enabledValue}get prescaler(){const t=this.cpu.data[this.config.WDTCSR];return 2048<<((32&t)>>2|7&t)}}const at=46;class ot{constructor(t,e,i,s,r){this.START={address:13,flagRegister:at,flagMask:128,enableRegister:45,enableMask:128},this.OVF={address:14,flagRegister:at,flagMask:64,enableRegister:45,enableMask:64};const n=i,a=n+2;e.addListener((e=>{32===(32&t.data[45])&&(e&1<<r&&!(e&1<<s)&&t.setInterruptFlag(this.START),e&1<<r&&e&1<<s&&(t.data[46]|=32))}));const o=()=>{const e=t.data[a],i=128&t.data[47]?e|1<<s:e&~(1<<s);t.writeHooks[a](i,e,a,255),128&i&&!(128&t.data[n])?t.data[46]|=16:t.data[46]&=-17},c=()=>{const e=t.data[46]+1&15;t.data[46]=-16&t.data[46]|e,e||(t.data[48]=t.data[47],t.setInterruptFlag(this.OVF))},h=e=>{t.data[47]=t.data[47]<<1|e,o()};t.writeHooks[47]=e=>(t.data[47]=e,o(),!0),t.writeHooks[46]=e=>(t.data[46]=224&t.data[46]&~e|15&e,t.clearInterruptByFlag(this.START,e),t.clearInterruptByFlag(this.OVF,e),!0),t.writeHooks[45]=i=>{t.data[45]=-4&i,t.updateInterruptEnable(this.START,i),t.updateInterruptEnable(this.OVF,i);const a=3&i,o=3&i,u=2&i;e.openCollector=o>=2?1<<s:0;const l=t.data[n]&1<<s?1:0;if(u&&!a&&(h(l),c()),1&i){t.writeHooks[n](1<<r,t.data[n],n,255);const e=t.data[n]&1<<r;return!u||2!==a&&3!==a||(2===a&&e&&h(l),3!==a||e||h(l),c()),!0}}}}},12672:function(t,e,i){function s(t,e){void 0===e&&(e=!1);var i=t.length,s=0,o="",c=0,h=16,u=0,l=0,d=0,p=0,C=0;function E(e,i){for(var r=0,n=0;r<e||!i;){var a=t.charCodeAt(s);if(a>=48&&a<=57)n=16*n+a-48;else if(a>=65&&a<=70)n=16*n+a-65+10;else{if(!(a>=97&&a<=102))break;n=16*n+a-97+10}s++,r++}return r<e&&(n=-1),n}function f(){if(o="",C=0,c=s,l=u,p=d,s>=i)return c=i,h=17;var e=t.charCodeAt(s);if(r(e)){do{s++,o+=String.fromCharCode(e),e=t.charCodeAt(s)}while(r(e));return h=15}if(n(e))return s++,o+=String.fromCharCode(e),13===e&&10===t.charCodeAt(s)&&(s++,o+="\n"),u++,d=s,h=14;switch(e){case 123:return s++,h=1;case 125:return s++,h=2;case 91:return s++,h=3;case 93:return s++,h=4;case 58:return s++,h=6;case 44:return s++,h=5;case 34:return s++,o=function(){for(var e="",r=s;;){if(s>=i){e+=t.substring(r,s),C=2;break}var a=t.charCodeAt(s);if(34===a){e+=t.substring(r,s),s++;break}if(92!==a){if(a>=0&&a<=31){if(n(a)){e+=t.substring(r,s),C=2;break}C=6}s++}else{if(e+=t.substring(r,s),++s>=i){C=2;break}switch(t.charCodeAt(s++)){case 34:e+='"';break;case 92:e+="\\";break;case 47:e+="/";break;case 98:e+="\b";break;case 102:e+="\f";break;case 110:e+="\n";break;case 114:e+="\r";break;case 116:e+="\t";break;case 117:var o=E(4,!0);o>=0?e+=String.fromCharCode(o):C=4;break;default:C=5}r=s}}return e}(),h=10;case 47:var f=s-1;if(47===t.charCodeAt(s+1)){for(s+=2;s<i&&!n(t.charCodeAt(s));)s++;return o=t.substring(f,s),h=12}if(42===t.charCodeAt(s+1)){s+=2;for(var g=i-1,R=!1;s<g;){var _=t.charCodeAt(s);if(42===_&&47===t.charCodeAt(s+1)){s+=2,R=!0;break}s++,n(_)&&(13===_&&10===t.charCodeAt(s)&&s++,u++,d=s)}return R||(s++,C=1),o=t.substring(f,s),h=13}return o+=String.fromCharCode(e),s++,h=16;case 45:if(o+=String.fromCharCode(e),++s===i||!a(t.charCodeAt(s)))return h=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=function(){var e=s;if(48===t.charCodeAt(s))s++;else for(s++;s<t.length&&a(t.charCodeAt(s));)s++;if(s<t.length&&46===t.charCodeAt(s)){if(!(++s<t.length&&a(t.charCodeAt(s))))return C=3,t.substring(e,s);for(s++;s<t.length&&a(t.charCodeAt(s));)s++}var i=s;if(s<t.length&&(69===t.charCodeAt(s)||101===t.charCodeAt(s)))if((++s<t.length&&43===t.charCodeAt(s)||45===t.charCodeAt(s))&&s++,s<t.length&&a(t.charCodeAt(s))){for(s++;s<t.length&&a(t.charCodeAt(s));)s++;i=s}else C=3;return t.substring(e,i)}(),h=11;default:for(;s<i&&M(e);)s++,e=t.charCodeAt(s);if(c!==s){switch(o=t.substring(c,s)){case"true":return h=8;case"false":return h=9;case"null":return h=7}return h=16}return o+=String.fromCharCode(e),s++,h=16}}function M(t){if(r(t)||n(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(t){s=t,o="",c=0,h=16,C=0},getPosition:function(){return s},scan:e?function(){var t;do{t=f()}while(t>=12&&t<=15);return t}:f,getToken:function(){return h},getTokenValue:function(){return o},getTokenOffset:function(){return c},getTokenLength:function(){return s-c},getTokenStartLine:function(){return l},getTokenStartCharacter:function(){return c-p},getTokenError:function(){return C}}}function r(t){return 32===t||9===t||11===t||12===t||160===t||5760===t||t>=8192&&t<=8203||8239===t||8287===t||12288===t||65279===t}function n(t){return 10===t||13===t||8232===t||8233===t}function a(t){return t>=48&&t<=57}var o;function c(t,e,i){void 0===i&&(i=o.DEFAULT);var r=s(t,!1);function n(t){return t?function(){return t(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}function a(t){return t?function(e){return t(e,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}var c=n(e.onObjectBegin),h=a(e.onObjectProperty),u=n(e.onObjectEnd),l=n(e.onArrayBegin),d=n(e.onArrayEnd),p=a(e.onLiteralValue),C=a(e.onSeparator),E=n(e.onComment),f=a(e.onError),M=i&&i.disallowComments,g=i&&i.allowTrailingComma;function R(){for(;;){var t=r.scan();switch(r.getTokenError()){case 4:_(14);break;case 5:_(15);break;case 3:_(13);break;case 1:M||_(11);break;case 2:_(12);break;case 6:_(16)}switch(t){case 12:case 13:M?_(10):E();break;case 16:_(1);break;case 15:case 14:break;default:return t}}}function _(t,e,i){if(void 0===e&&(e=[]),void 0===i&&(i=[]),f(t),e.length+i.length>0)for(var s=r.getToken();17!==s;){if(-1!==e.indexOf(s)){R();break}if(-1!==i.indexOf(s))break;s=R()}}function I(t){var e=r.getTokenValue();return t?p(e):h(e),R(),!0}function T(){switch(r.getToken()){case 3:return function(){l(),R();for(var t=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||_(4,[],[]),C(","),R(),4===r.getToken()&&g)break}else t&&_(6,[],[]);T()||_(4,[],[4,5]),t=!0}return d(),4!==r.getToken()?_(8,[4],[]):R(),!0}();case 1:return function(){c(),R();for(var t=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||_(4,[],[]),C(","),R(),2===r.getToken()&&g)break}else t&&_(6,[],[]);(10!==r.getToken()?(_(3,[],[2,5]),0):(I(!1),6===r.getToken()?(C(":"),R(),T()||_(4,[],[2,5])):_(5,[],[2,5]),1))||_(4,[],[2,5]),t=!0}return u(),2!==r.getToken()?_(7,[2],[]):R(),!0}();case 10:return I(!0);default:return function(){switch(r.getToken()){case 11:var t=r.getTokenValue(),e=Number(t);isNaN(e)&&(_(2),e=0),p(e);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return R(),!0}()}}return R(),17===r.getToken()?!!i.allowEmptyContent||(_(4,[],[]),!1):T()?(17!==r.getToken()&&_(9,[],[]),!0):(_(4,[],[]),!1)}i.d(e,{Qc:function(){return h}}),function(t){t.DEFAULT={allowTrailingComma:!1}}(o||(o={}));var h=function(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=o.DEFAULT);var s=null,r=[],n=[];function a(t){Array.isArray(r)?r.push(t):null!==s&&(r[s]=t)}return c(t,{onObjectBegin:function(){var t={};a(t),n.push(r),r=t,s=null},onObjectProperty:function(t){s=t},onObjectEnd:function(){r=n.pop()},onArrayBegin:function(){var t=[];a(t),n.push(r),r=t,s=null},onArrayEnd:function(){r=n.pop()},onLiteralValue:a,onError:function(t,i,s){e.push({error:t,offset:i,length:s})}},i),r[0]}},4111:function(t,e,i){function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}i.d(e,{Z:function(){return s}})},2236:function(t,e,i){function s(t){var e;if("function"===typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}i.d(e,{Z:function(){return s}})},77892:function(t,e,i){function s(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}i.d(e,{Z:function(){return s}})},95315:function(t,e,i){i.d(e,{Z:function(){return r}});var s=i(77892);function r(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,(0,s.Z)(t,e,"get"))}},70222:function(t,e,i){function s(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}i.d(e,{Z:function(){return s}})},88409:function(t,e,i){i.d(e,{Z:function(){return r}});var s=i(77892);function r(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,(0,s.Z)(t,e,"set"),i),i}},26626:function(t,e,i){i.d(e,{Z:function(){return a}});var s=i(82662),r=i(4111);function n(t,e){return!e||"object"!==((i=e)&&i.constructor===Symbol?"symbol":typeof i)&&"function"!==typeof e?(0,r.Z)(t):e;var i}function a(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=(0,s.Z)(t);if(e){var a=(0,s.Z)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return n(this,i)}}},82662:function(t,e,i){function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function r(t){return s(t)}i.d(e,{Z:function(){return r}})},28668:function(t,e,i){i.d(e,{Z:function(){return r}});var s=i(44998);function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(0,s.Z)(t,e)}},44998:function(t,e,i){function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function r(t,e){return s(t,e)}i.d(e,{Z:function(){return r}})}}]);